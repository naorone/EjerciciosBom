<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        let ventana;
        let escapeWindow = true;
        function nuevaPag()
        {
            ventana = window.open("","",'width=200px,height=200px');

            crearBoton("arriba",irArriba);
            crearBoton("izquierda",irIzq);
            crearBoton("derecha",irDerecha);
            crearBoton("abajo",irAbajo);
            crearBoton("agrandar",agrandar);
            crearBoton("reducir",reducir);
            centrar(ventana);

        }
        function escape(){
            let randomX = Math.floor(Math.random() * screen.availWidth);
            let randomY = Math.floor(Math.random() * screen.availHeight);

            if(escapeWindow){
                ventana.moveTo(randomX, randomY);
            }
        }
        function stopEscape() {
            escapeWindow = false;
        }

        function crearBoton(valor,funcion)
        {
            let boton = document.createElement("input");
            boton.type="button";
            boton.onmouseover=escape;
            boton.value=valor;
            boton.onclick = funcion;
            ventana.document.body.appendChild(boton);
        }

        function agrandar()
        {
            if(ventana.outerHeight< screen.availHeight/2 && ventana.outerWidth < screen.availWidth/2)
            {
                ventana.resizeBy(ventana.outerHeight*2,ventana.outerWidth*2);
            }


        }

        function reducir()
        {
            let alto= ventana.outerHeight;
            let altoMitad= (alto/2)*-1;
            let ancho = ventana.outerWidth;
            let anchoMitad= (ancho/2)*-1;
            if (alto >= 100 && ancho >= 100)
            {
                ventana.resizeBy(anchoMitad,altoMitad);
            }

        }

        function irArriba()
        {
            ventana.moveBy(0,-10);
        }

        function irIzq()
        {
            ventana.moveBy(-10,0);
        }
        function irDerecha()
        {
            ventana.moveBy(10,0);
        }
        function irAbajo()
        {
            ventana.moveBy(0,10);
        }

        function centrar(ventana)
        {
            ventana.moveTo(ventana.screen.availWidth/2 - ventana.outerWidth/2, ventana.screen.availHeight/2 - ventana.outerHeight/2);
        }


    </script>



</head>
<body>
<button onclick="nuevaPag()">Abrir Pagina</button>
<button type="button" onclick="stopEscape()">Stop</button>
</body>
</html>